<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Imperial Analysis: docs/HiggsToTauTau.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen2.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Imperial Analysis
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_higgs_to_tau_tau_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">docs/HiggsToTauTau.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_higgs_to_tau_tau_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;HiggsToTauTau {#higgs-to-tau-tau}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;============</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[TOC]</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;This page gives instructions for running the Higgs to tau tau analysis, with the goal of generating the datacard inputs used to produce the public results in the SM search [HIG-13-004](http://arxiv.org/abs/1401.5041) and MSSM search [HIG-13-021](http://cds.cern.ch/record/1623367?ln=en) and the not yet public MSSM H-&gt;hh search [HIG-14-034](http://cms.cern.ch/iCMS/analysisadmin/cadi?ancode=HIG-14-034). It is possible to produce these inputs for the mu-tau, e-tau and e-mu channels and for both 7 and 8 TeV analyses. For the H-&gt;hh analysis only e-tau and mu-tau channels are used with the 8 TeV data.</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;The full analysis chain involves several steps, each outlined in a section below.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;Ntuple Production {#htt-ntuple-production}</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;==========================================</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;Production of a complete set of ntuples from AOD using the grid.  This is by far the most time and CPU intensive step and should only be performed when changes to the underlying object reconstruction and discrimination are needed which cannot be realised in this framework with existing ntuples. Some notes on preparing a new production can be found on [this] page along with a suggested list of samples to process. For running the published version of the analyses it is sufficient to use existing productions, for which all ntuple files are located on dCache at Imperial. For book-keeping and scripting convenience, all the ntuples for a given sample can be found under the folder structure:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    srm://gfe02.grid.hep.ph.ic.ac.uk:8443/srm/managerv2?SFN=/pnfs/hep.ph.ic.ac.uk/data/cms/store/user/[USERNAME]/[DATE]/[Data/MC]_[VERSION]/[SAMPLE_LABEL]</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; In this `USERNAME` is the lxplus account name of the user who initiated the grid jobs for this sample. A given production is primarily indentified by `DATE`, which is the date that production was started. The `June6` production is used for the 8 TeV analysis, and `Apr11` for the 7 TeV analysis. Within this  folder samples are split into folders starting either `Data_` or `MC_` and ending in the CMSSW software version used,  `53X` or `42X` for the 8 TeV and 7 TeV analyses respectively. Finally, shorted versions of the AOD dataset names are used to indentify a particular sample. A full example path would be:</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    srm://gfe02.grid.hep.ph.ic.ac.uk:8443/srm/managerv2?SFN=/pnfs/hep.ph.ic.ac.uk/data/cms/store/user/agilbert/Apr11/MC_42X/WJetsToLNu</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;Skimming {#htt-skimming}</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;========================</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;To reduce the size of the ntuples a skim is applied which only retains events containing a good candidate pair, either electron + tau, muon + tau or electron + muon. Skimming is performed from within the HiggsTauTau directory using the /test/HiggsTauTau.cpp code with skim_mode turned on. Example scripts which perform skims of all data and MC samples can be found [here](https://github.com/ajgilbert/ICHiggsTauTau/blob/master/Analysis/HiggsTauTau/scripts/June6_et_mt_skim.sh) for the mu-tau and e-tau channels and [here](https://github.com/ajgilbert/ICHiggsTauTau/blob/master/Analysis/HiggsTauTau/scripts/June6_em_skim.sh) for the e-mu channel. A good workflow for skimming is to skim directly from dCache at Imperial onto the SSD at Imperial, before copying the skims back onto dCache as a backup. For running at CERN, the skimmed ntuples will comfortably fit in an eos area or on local disk on a PC. </div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;Selection of events {#htt-event-selection}</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;==========================================</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;Event selection is performed using HiggsTauTau.cpp. This should be run once for each of the data and MC samples, and then again for the generation of templates for systematics such as tau or jet energy scale. To simplify this, a python script higgsTauTau.py is available which generates all the jobs for backgrounds, data and signal for the central tau energy scale and the tau energy scale shifted up and down. First an appropriate output directory should be made with the correct directory structure:</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    ./scripts/make_output_folder.sh output/Paper_2012/</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    ./scripts/prepare_output_folder.sh output/Paper_2012/</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;Next, the following produces all of the necessary output files for the SM and MSSM analyses:</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    ./scripts/higgsTauTau.py -p June6 -i root://eoscms//eos/cms/store/user/rlane/httskims/ --data --bkg --mssm --sm -s &#39;0,1,2&#39; -c &#39;et,mt,em&#39; -e Paper --submit=&#39;./scripts/submit_lxbatch_job.sh 1nh&#39;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;The jobs can be submitted to lxbatch (as in this example), the IC batch, or run locally. Similarly for the H-&gt;hh signal jobs: </div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    ./scripts/higgsTauTau.py -p June6 -i root://eoscms//eos/cms/store/user/rlane/httskims/ --Hhh -s &#39;0,1,2&#39; -c &#39;et,mt&#39; -e Paper --submit=&#39;./scripts/submit_lxbatch_job.sh 1nh&#39;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;The -s &#39;0,1,2&#39; option produces the tau energy scale systematics. To produce jet energy scale systematics (in particular important in the H-&gt;hh analysis), the jobs should be rerun setting jes_mode to 1 and 2 in the cfg file (e.g. Paper_2012.cfg).</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;Producing plots and datacards {#htt-datacards}</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;=============================================</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;The output of HiggsTauTau.cpp is a set of flat trees containing all variables of importance to the SM, MSSM and H-&gt;hh analyses. Plots and datacards can then be produced with the help of test/HiggsTauTauPlot4.cpp. Datacard inputs can be produced using another helper python script as follows:</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;     ./scripts/makeDatacards2.py -i output/Paper_2012/  -c &#39;et,mt,em&#39; --svfit --cfg=scripts/new_plot_sm_2012.cfg -p scripts/Paper_params_2012.dat --scheme=&quot;new_sm&quot;,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;for the SM legacy analysis, </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;     </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;     ./scripts/makeDatacards2.py -i output/Paper_2012/  -c &#39;et,mt,em&#39; --svfit --cfg=scripts/new_plot_mssm_2012.cfg -p scripts/Paper_params_2012.dat --scheme=&quot;new_mssm&quot;,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;for the MSSM legacy analysis, and</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;     ./scripts/makeDatacards2.py -i output/Paper_2012/  -c &#39;et,mt&#39; --mH --masscuts --cfg=scripts/new_plot_Hhh_2012.cfg -p scripts/Paper_params_2012.dat --scheme=&quot;HTohh&quot;,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;for the H-&gt;hh analysis.</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
</body>
</html>
