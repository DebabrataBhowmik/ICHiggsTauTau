<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Imperial Analysis: docs/Objects.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen2.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Imperial Analysis
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_objects_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">docs/Objects.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_objects_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Physics Objects {#physics-objects}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;==================================</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[TOC]</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;This page documents:</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  - The physics object classes available in the framework</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  - The CMSSW modules used to produce them</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  - Example python configuration for each module</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  - The object properties that are not filled by default in each module</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  - Recipes for non-standard objects and reconstruction</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;Use the contents panel on the right to navigate between objects. Each section provides links to the documentation for the object class in question as well as the producer module. To check the list of properties an object class provides, follow the link to the object page. From this page the documentation for each `set_[property]` method will contain a link to the source code of the producer module where this method is called.</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;An example python configuration for each producer module is also given below. All these snippets are extracted from the file: `python/default_producers_cfi.py`.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;The basic configuration for each module is usually the same: the `input` option takes an `edm::InputTag` to the input object collection, and the `branch` option takes a string that will label the branch in the output TTree. Other options typically control the addition of extra object properties that are not filled by default in the module. Reasons for this can vary, but are typically due to one of the following:</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  - **The interface to access the property changes between CMSSW releases, or is not present at all in some subset of releases** \n The code to access this property can&#39;t be included in the producer, as it would fail to compile in some releases. The solution is often a separate producer for just this property, stored in an independent git repository that can be checked-out as a separate CMSSW package. This repository can then have separate branches for different versions of CMSSW. This separate producer will typically add an `edm::ValueMap&lt;T&gt;` to the event, where `T` is the type of the property in question. An option is then provided in the producer to read load this `ValueMap` and extract the values. There are several examples of this workaround below. These separate producers follow a module naming convention of `IC[Object][Property]Calcuator`, a CMSSW package convention of `ICAnalysis/[Property]Calculator` and git repository convention of `ICAnalysis-[Property]Calculator`.</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  - **A new method to calculate some property is introduced in a later CMSSW release, but the possibility to use the old method should be maintained.** \n If both the new and the old method are supported in all CMSSW versions then one possibility is to just add an option to the main producer to switch between methods. Or, if the new method is only available in later releases, a better way is to create a separate producer in a new package as in the previous example. The old method should also be moved to a separate producer. However this may remain within this package as long as it still compiles in all the supported releases.</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  - **The property requires several other inputs from the edm::Event** \n In this case to allow maximum flexibility the other inputs must also be specified in the module configuration, and the calculation should remain optional to allow for the case where these inputs are not available in some dataset to be processed.</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;\note **Producer input collections**: The majority of the CMSSW producer modules listed below use `edm::View` objects to access the input collection. This provides a certain amount of flexibility in the actual type of the input collection. An `edm::View&lt;T&gt;`, where `T` is some object class, can access an `std::vector&lt;T&gt;`, an `edm::RefVector&lt;T&gt;`, or the corresponding collections for some other type `U` which derives from the type `T`.</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;\warning **Reading ValueMaps**: Because of the way references are stored in `edm::ValueMap` objects these should not be produced using and `edm::RefVector&lt;T&gt;` collection as input, but rather the original `std::vector&lt;T&gt;` collection of concrete objects. For example, even if you intend to ntuple-ise a filtered `edm::RefVector&lt;GsfElectron&gt;` collection, you should still produce the ID and isolation `ValueMap` objects using the original `std::vector&lt;GsfElectron&gt;` collection.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;Candidate {#objs-candidate}</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;===========================</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; - **Definition**: ic::Candidate</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; - **CMSSW Producer**: ICCandidateProducer</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Candidate&gt;`</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; - **Producer Output**: `std::vector&lt;ic::Candidate&gt;`</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;**Example usage**</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;@snippet python/default_producers_cfi.py Candidate</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;CompositeCandidate {#objs-composite}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;=========</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; - **Definition**: ic::CompositeCandidate</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;An ic::CompositeCandidate aggregates multiple ic::Candidate (or derived) objects, summing the charge and four-momenta, while maintaining pointers to the original input objects. Due to its transient nature a CMSSW producer is not provided.</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;Electron {#objs-electron}</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;=========================</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; - **Definition**: ic::Electron</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; - **CMSSW Producer**: ICElectronProducer</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::GsfElectron&gt;`</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; - **Producer Output**: `std::vector&lt;ic::Electron&gt;`</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;The producer takes as input any collection where the objects are, or derive from, `reco::GsfElectron` objects. This includes `pat::Electron` collections. There are several ic::Electron properties which are not calculated by default in the producer:</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;Properties    | Notes</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;:------------ | :---------- |</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;ic::Electron::r9 | A `ValueMap` for this variable can be calculated by the external producer [ICAnalysis-ElectronR9Calculator](https://github.com/ajgilbert/ICAnalysis-ElectronR9Calculator). The option `inputR9` should be set to this `ValueMap` and the `includeR9` option should be set to `True`.</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;ic::Electron::hcal_sum | The extra inputs required to calculate this variable are not available in the AOD for all CMSSW release series. The method by which the variable is calculated is also expected to change in the `CMSSW_7_X_Y` series. A `ValueMap` for this variable can be produced by the ICElectronHcalDepthCalculator module within this package. The option `inputHcalSum` should be set to this `ValueMap` and the option `includeHcalSum` option set to `true`.</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;ic::Electron::has_matched_conversion | In anticipation of the method to calculate this flag changing in future releases the calculation has moved to a separate producer, ICElectronConversionCalculator, within this package. This calculates a `ValueMap` which should be specified by the option `inputConversionMatches` when the `includeConversionMatches` option is set to `True`.</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;ic::Electron::dxy_vertex &lt;br&gt; ic::Electron::dz_vertex | These must be calculated with respect to a user-specified reco::Vertex. The first vertex in the collection specified by the `inputVertices` option will be used when `includeVertexIP` is set to `True`.</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;ic::Electron::dxy_beamspot | This must be calculated with respect to a user-specified `reco::BeamSpot`. The beamspot set by the `inputBeamspot` option will be used when the option `includeBeamspotIP` is set to `True`.</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;ic::Electron::dr03_pfiso_charged_all &lt;br&gt; ic::Electron::dr03_pfiso_charged &lt;br&gt; ic::Electron::dr03_pfiso_neutral &lt;br&gt; ic::Electron::dr03_pfiso_gamma &lt;br&gt; ic::Electron::dr03_pfiso_pu &lt;br&gt; ic::Electron::dr04_pfiso_charged_all &lt;br&gt; ic::Electron::dr04_pfiso_charged &lt;br&gt; ic::Electron::dr04_pfiso_neutral &lt;br&gt; ic::Electron::dr04_pfiso_gamma &lt;br&gt; ic::Electron::dr04_pfiso_pu | These should be calculated on-the-fly in a CMSSW job. Individual analyses may modify the isolation definition, for example changing veto cones. See the section \ref obs-pf-iso below for software recipes.  Two sets of isolation values may be stored, nominally for isolation cones of sizes \f$\Delta R = 0.3\f$ and \f$\Delta R = 0.4\f$. These are enabled via the options `includePFIso03` and `includePFIso04` respectively. The `InputTag` for each isolation sum `ValueMap` must be specified in the `pfIso03` and/or `pfIso04` PSets as relevant.</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;**Example usage**</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;\snippet python/default_producers_cfi.py Electron</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;Muon {#objs-muon}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;=================</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; - **Definition**: ic::Muon</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; - **CMSSW Producer**: ICMuonProducer</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Muon&gt;` or an `edm::View&lt;reco::PFCandidate&gt;`, but see below for details</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; - **Producer Output**: `std::vector&lt;ic::Muon&gt;`</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;The producer operates in one of two modes, controlled by the option `isPF`. When set to `False`, the input collection should contain `reco::Muon` (or derived) objects. This includes `pat::Muon` collections. When set to `True`, the input should be a collection of `reco::PFCandidate` objects that are identified as PF muons. There are several ic::Muon properties which are not calculated by default in the producer:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;Properties    | Notes</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;:------------ | :---------- |</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;ic::Muon::dxy_vertex &lt;br&gt; ic::Muon::dz_vertex | These must be calculated with respect to a user-specified reco::Vertex. The first vertex in the collection specified by the `inputVertices` option will be used when `includeVertexIP` is set to `True`.</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;ic::Muon::dxy_beamspot | This must be calculated with respect to a user-specified `reco::BeamSpot`. The beamspot set by the `inputBeamspot` option will be used when the option `includeBeamspotIP` is set to `True`.</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;ic::Muon::dr03_pfiso_charged_all &lt;br&gt; ic::Muon::dr03_pfiso_charged &lt;br&gt; ic::Muon::dr03_pfiso_neutral &lt;br&gt; ic::Muon::dr03_pfiso_gamma &lt;br&gt; ic::Muon::dr03_pfiso_pu &lt;br&gt; ic::Muon::dr04_pfiso_charged_all &lt;br&gt; ic::Muon::dr04_pfiso_charged &lt;br&gt; ic::Muon::dr04_pfiso_neutral &lt;br&gt; ic::Muon::dr04_pfiso_gamma &lt;br&gt; ic::Muon::dr04_pfiso_pu | These should be calculated on-the-fly in a CMSSW job. Individual analyses may modify the isolation definition, for example changing veto cones. See the section \ref obs-pf-iso below for software recipes.  Two sets of isolation values may be stored, nominally for isolation cones of sizes \f$\Delta R = 0.3\f$ and \f$\Delta R = 0.4\f$. These are enabled via the options `includePFIso03` and `includePFIso04` respectively. The `InputTag` for each isolation sum `ValueMap` must be specified in the `pfIso03` and/or `pfIso04` PSets as relevant.</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;**Example usage**</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;\snippet python/default_producers_cfi.py Muon</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;Photon {#objs-photon}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;=====================</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; - **Definition**: ic::Photon</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; - **CMSSW Producer**: ICPhotonProducer</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Photon&gt;`</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; - **Producer Output**: `std::vector&lt;ic::Photon&gt;`</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;The producer takes as input a collection of `reco::Photon` objects. The following ic::Photon properties are not calculated by default:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;Properties    | Notes</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;:------------ | :---------- |</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;ic::Photon::pass_electron_veto | This flag is calculated by a separate producer in this package: ICPhotonElectronVetoCalculator</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;ic::Photon::had_tower_over_em | This is calculated by an external producer available in the [ICAnalysis-PhotonHadTowerOverEmCalculator](https://github.com/ajgilbert/ICAnalysis-PhotonHadTowerOverEmCalculator) repository.</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;ic::Photon::dr03_pfiso_charged &lt;br&gt; ic::Photon::dr03_pfiso_neutral &lt;br&gt; ic::Photon::dr03_pfiso_gamma | As for Electron and Muon production the isolation values will be extracted from the specified `ValueMap` inputs.</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;**Example usage**</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;\snippet python/default_producers_cfi.py Photon</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;Tau {#objs-tau}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;===============</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; - **Definition**: ic::Tau</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; - **CMSSW Producer**: ICTauProducer</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::PFTau&gt;` or an `edm::View&lt;pat::Tau&gt;`, but see below</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; - **Producer Output**: `std::vector&lt;ic::Tau&gt;`</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; - **Producer Requests**: Can request the `reco::Track` objects from the charged PF constituents. The request will be produced with the label `requestedTracks`.</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;The producer is a template class on the type of the input objects. Two specific template instances are defined as CMSSW modules: one for `reco::PFTau` input (ICPFTauProducer) and the other for `pat::Tau` input (ICPFTauFromPatProducer). The main difference between the two is that the user must specify the list of discriminators to extract from the `edm::Event` in the `reco::PFTau` case,  whereas in the `pat::Tau` case these are extracted directly from the input object.</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;The following ic::Tau properties are not calculated by default:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;Properties    | Notes</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;:------------ | :---------- |</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;ic::Tau::lead_dxy_vertex &lt;br&gt; ic::Tau::lead_dz_vertex | These must be calculated with respect to a user-specified reco::Vertex. The first vertex in the collection specified by the `inputVertices` option will be used when `includeVertexIP` is set to `True`.</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;**Example usage**</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;\snippet python/default_producers_cfi.py Tau</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;Missing Tranvserse Energy {#objs-met}</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;=====================================</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; - **Definition**: ic::Met</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; - **CMSSW Producers**: ICMetProducer, ICSingleMetProducer</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::MET&gt;`</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; - **Producer Output**: `std::vector&lt;ic::Met&gt;` in the ICMetProducer, and `ic::Met` in the ICSingleMetProducer</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;Two producers are provided, both of which take a vector of `reco::MET` (or derived) objects as input. The ICMetProducer will produce a vector of `ic::Met` objects, whereas the ICSingleMetProducer will produce a single `ic::Met` object. The ICMetProducer can optionally read a `vector&lt;std::size_t&gt;` from the edm::Event that should be aligned with the input `vector&lt;reco::MET&gt;` and will be used to set the ic::Met::id values in the output collection. The main use for this feature is in conjunction with the [MVA MET](\ref objs-mva-met) producer where `MET` objects must be identified by combined hashes of the lepton inputs.</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;**Example usage**</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;\snippet python/default_producers_cfi.py Met</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;\snippet python/default_producers_cfi.py SingleMet</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;Jet {#objs-jet}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;===============</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; - **Definition**: ic::Jet, ic::CaloJet, ic::JPTJet, ic::PFJet</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; - **CMSSW Producers**: ICJetProducer (see below for template instantiations)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Jet&gt;` or `edm::View&lt;pat::Jet&gt;` (see below for details)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; - **Producer Output**: `std::vector&lt;ic::Jet&gt;`, `std::vector&lt;ic::CaloJet&gt;`, `std::vector&lt;ic::JPTJet&gt;`, `std::vector&lt;ic::PFJet&gt;`</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; - **Producer Requests**:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   + Can request the `reco::Track` objects for the charged constituents of PFJet or JPTJet inputs. The request will be produced with the label `requestedTracks`.</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   + Can request the `reco::SecondaryVertexTagInfo` objects associated to the jets, which will be produced with the label `requestedSVInfo`.</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;The ic::JetProducer is a template class that is specialised for both the input and output jet types. While making the code more complex, this avoids a large amount of duplication that would result for have a normal producer for each possible input-output pairing. The possible CMSSW producers are defined [here](\ref JetProducers).</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;Each choice of input and output type brings with it the need for a specific set of options. This is addressed through two helper structs, the JetSrcHelper which is templated only on the input type, and the JetDestHelper which is templated only on the output type. Please see the documentation pages of these structs for further details.</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;An important distinction to make between using a reco::Jet and a pat::Jet as input is the treatment of the jet energy corrections. This module assumes a reco::Jet collection as input is uncorrected. The JetSrcHelper in this case provides extra options to specify the list of corrections to apply and an optional cut string that may be applied after the input jet is corrected and before a corresponding ic::Jet is produced.</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;The following properties are not calculated by default:</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;Properties    | Notes</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;:------------ | :---------- |</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;ic::Jet::parton_flavour | *For reco::Jet input producers only*: The MC truth jet flavour (as a PDG ID). The method by which this is calculated is expected to change for 2015 data analyses. In anticipation, the calculation has moved to a separate producer: ICJetFlavourCalculator, within this package. This calculates a `ValueMap` which should be specified by the option `inputJetFlavour` when the `includeJetFlavour` option is set to `True`.</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;ic::PFJet::pu_id_mva_value | *For ic::PFJet output producers only*: See the section [below](\ref objs-mva-met) for details on producing a pileup jet MVA `ValueMap`. This should be specified by the option `inputPileupID` when the `icludePileupID` option is set to `True`.</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;ic::PFJet::beta &lt;br&gt; ic::PFJet::beta_max &lt;br&gt; ic::PFJet::linear_radial_moment &lt;br&gt; ic::PFJet::charged_multiplicity_nopu | *For ic::PFJet output producers only:* These variables are only calculated when `includeTrackBasedVars` is set to `True` and both the `inputTracks` and `inputVertices` collections are defined.</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;ic::JPTJet::beta &lt;br&gt; ic::JPTJet::beta_max &lt;br&gt; ic::JPTJet::track_pt_total | *For ic::JPTJet output producers only:* These variables are only calculated when `includeTrackBasedVars` is set to `True` and both the `inputTracks` and `inputVertices` collections are defined.</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;ic::CaloJet::fHPD &lt;br&gt; ic::CaloJet::fRBX &lt;br&gt; ic::CaloJet::id_loose &lt;br&gt; ic::CaloJet::id_tight | *For ic::CaloJet and ic::JPTJet output producers only:* Requires an external `reco::JetID` map. Set `inputJetID` to the label of this map and set `includeJetID` to `True`.</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;**Example usage**</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;@snippet python/default_producers_cfi.py Jet</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;Vertex {#objs-vertex}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;=====================</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; - **Definition**: ic::Vertex</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; - **CMSSW Producers**: ICVertexProducer</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Vertex&gt;`</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; - **Producer Output**: `std::vector&lt;ic::Vertex&gt;`</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; - **Producer Requests**: Can request the `reco::Track` objects used in the vertex fit. The request will be produced with the label `requestedTracks`.</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;The producer can be configured to store only the first vertex in the input collection by setting the value of the `firstVertexOnly` option to `True`. The ic::Track::id values of the tracks used in each vertex fit can also be stored (along with the fit weighting), subject to a minimum threshold set by the option `trackPtThreshold`.</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;**Example usage**</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;@snippet python/default_producers_cfi.py Vertex</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;Secondary Vertex {#objs-sec-vertex}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;===================================</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; - **Definition**: ic::SecondaryVertex</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; - **CMSSW Producers**: ICSecondaryVertexProducer</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::SecondaryVertexTagInfo&gt;`</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; - **Producer Output**: `std::vector&lt;ic::SecondaryVertex&gt;`</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; - **Producer Requests**: Can request the `reco::Track` objects used in the vertex fit. The request will be produced with the label `requestedTracks`.</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;Note that each reco::SecondaryVertexTagInfo input (one per jet) can contain multiple secondary vertices, each of which will be added to the output collection. The ic::Track::id values of the tracks used in each vertex fit can also be stored (along with the fit weighting), subject to a minimum threshold set by the option `trackPtThreshold`.</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;**Example usage**</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;@snippet python/default_producers_cfi.py SecondaryVertex</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;Track {#objs-track}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;===================</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; - **Definitions**: ic::Track, ic::LightTrack</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; - **CMSSW Producers**: ICTrackProducer, ICLightTrackProducer</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::Track&gt;`</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; - **Producer Output**: `std::vector&lt;ic::Track&gt;` or `std::vector&lt;ic::LightTrack&gt;`</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;Two track classes are provided. The `ic::Track` is the standard class and the `ic::LightTrack` provides a limited subset of the `ic::Track` variables for situations where these are sufficient for analysis and ntuple space is at a premium.</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;**Example usage**</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;@snippet python/default_producers_cfi.py Track</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;@snippet python/default_producers_cfi.py LightTrack</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;GenParticle {#objs-genparticle}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;=========================</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; - **Definition**: ic::GenParticle</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; - **CMSSW Producers**: ICGenParticleProducer</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::GenParticle&gt;`</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; - **Producer Output**: `std::vector&lt;ic::GenParticle&gt;`</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;The producer can optionally store the relations between particles in decay chains using the `includeMothers` and `includeDaughters` flags. When enabled, these options tell the producer to save the corresponding vectors of ic::GenParticle::index values. Note that this index is different from the ic::GenParticle::id value, and is equal to the vector index position of the `reco::GenParticle` in the input collection.</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;**Example usage**</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;@snippet python/default_producers_cfi.py GenParticle</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;GenJet {#objs-genjet}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;=====================</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; - **Definition**: ic::GenJet</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; - **CMSSW Producers**: ICGenJetProducer</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;reco::GenJet&gt;`</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; - **Producer Output**: `std::vector&lt;ic::GenJet&gt;`</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; - **Producer Requests**: Can request the `reco::GenParticle` objects clustered into each jet. The request will be produced with the label `requestedGenParticles`.</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;Note that due to technical limitations, if the `requestGenParticles` option is set to `True`, the original `reco::GenParticle` collection from which the jets were clustered must also be specified in the option `inputGenParticles`.</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;**Example usage**</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;@snippet python/default_producers_cfi.py GenJet</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;PileupInfo {#objs-pu-info}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;==========================</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; - **Definition**: ic::PileupInfo</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; - **CMSSW Producers**: ICPileupInfoProducer</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; - **Producer Input**: Any collection compatible with an `edm::View&lt;PileupSummaryInfo&gt;`</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; - **Producer Output**: `std::vector&lt;ic::PileupInfo&gt;`</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;Each object `PileupSummaryInfo` object in the input collection provides the pileup information for a single bunch crossing. The bunch crossing number, ic::PileupInfo::bunch_crossing can be used to identify the bunch crossing relative to the hard scatter interaction (which has a bunch crossing of zero).</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;**Example usage**</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;@snippet python/default_producers_cfi.py PileupInfo</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;SuperCluster {#objs-supercluster}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;=================================</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; - **Definition**: ic::SuperCluster</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; - **CMSSW Producers**: ICSuperClusterProducer</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; - **Producer Input**: Two collections (EB and EE) compatible with an `edm::View&lt;reco::SuperCluster&gt;`</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; - **Producer Output**: `std::vector&lt;ic::SuperCluster&gt;`</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;The `ic::SuperCluster` class does not inherit from ic::Candidate but is instead specified by the supercluster position and direction with respect to the detector origin. The producer requires two collections as input as these are stored separately for barrel and endcap superclusters in the `edm::Event`.</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;**Example usage**</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;@snippet python/default_producers_cfi.py SuperCluster</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;TriggerPath {#objs-trig-path}</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;=============================</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; - **Definition**: ic::TriggerPath</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; - **CMSSW Producers**: ICTriggerPathProducer</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; - **Producer Input**: A `pat::TriggerEvent` object</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; - **Producer Output**: `std::vector&lt;ic::TriggerPath&gt;`</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;The file `test/validation_cfg.py` contains examples for creating the `pat::TriggerEvent` in various CMSSW releases. The producer can be configured to only store the paths that fired in each event via the option `includeAcceptedOnly`. There is also an option `splitVersion` (off by default) to strip the integer version number from each trigger path name, and store this is a separate variable: ic::TriggerPath::version. If this is enabled it may also be useful to set `saveStrings` to `False`. The ic::TriggerPath::name will not be written, the version-less name will still be hashed and stored in the ic::TriggerPath::id variables, saving space overall.</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;**Example usage**</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;@snippet python/default_producers_cfi.py TriggerPath</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;TriggerObject {#objs-trig-obj}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;=============================</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; - **Definition**: ic::TriggerObject</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; - **CMSSW Producers**: ICTriggerObjectProducer</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; - **Producer Input**: A `pat::TriggerEvent` object</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; - **Producer Output**: `std::vector&lt;ic::TriggerObject&gt;`</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;The producer will store a collection of trigger objects used in the specified `hltPath`. Each object stores a vector of the (hashed) labels of the filter modules that accepted the object in the path.</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;**Example usage**</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;@snippet python/default_producers_cfi.py TriggerObject</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;EventInfo {#objs-event-info}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;============================</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; - **Definition**: ic::EventInfo</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; - **CMSSW Producers**: ICEventInfoProducer</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; - **Producer Input**: No mandatory input</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; - **Producer Output**: `ic::EventInfo`</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;The core event variables, such as event, lumi and run, are stored automatically. Other variables of interest may be added via the producer options. The options `includeJetRho` and `includeLeptonRho` can be used to store the values of the median energy densities used for the pileup jet energy correction and the lepton pileup isolation respectively. The appropriate inputs should be specified by the options `inputJetRho` and `inputLeptonRho`. The number of vertices in a particular collection (`inputVertices`) can also be stored (`includeVertexCount`), which is a space-saving alternative to storing an entire `ic::Vertex` collection. The options `filters`, `weights` and `genFilterWeights` are used to specify corresponding lists of input `bool`, `double` and `GenFilterInfo` values that should be added to the `ic::EventInfo` using the labels provided in the `PSet`.</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;**Example usage**</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;@snippet python/default_producers_cfi.py EventInfo</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;Non-standard Objects {#obs-non-standard}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;========================================</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;MVA MET / Pileup jet ID {#objs-mva-met}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;---------------------------------------</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;Supported releases:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  - `CMSSW_4_2_8_patch7`</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  - `CMSSW_5_3_X`</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  - `CMSSW_7_0_X` *pileup jet ID only*</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;Links:</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  - https://twiki.cern.ch/twiki/bin/viewauth/CMS/MVAMet</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  - https://twiki.cern.ch/twiki/bin/viewauth/CMS/PileupJetID</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  - https://github.com/ajgilbert/ICAnalysis-MVAMETPairProducer</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;The MVA MET is not available by default in any CMSSW release, and pileup jet ID is only included in the `CMSSW_7_0_X` series. A recipe is given below for obtaining the versions that were used in the legacy HiggsTauTau analysis, which was based on `CMSSW_5_3_7`. Newer recipes for the MVA MET have also been provided and are currently in use by some groups. See the twiki page above for details. Notably, newer MVA trainings have been provided that do not require the addition of recoil corrections, but these have not yet been tested in this framework.</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;The following recipe can be used to set-up the MVA MET and pileup ID in a different `CMSSW_5_3_X` release. It works by extracting the relevant git commits from a prepared branch based on the `CMSSSW_5_3_7` release, and applying these commits to a branch created from a different release.</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;~~~~~~~~~~~~~{.sh}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;# Assume we want to set up the MVA MET in some 5_3_X release other than 5_3_7</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;# If you haven&#39;t already - create the project area</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;scramv1 project CMSSW_5_3_X; cd CMSSW_5_3_X/src</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;# This will initialise git and create the local branch from-CMSSW_5_3_X</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;# We&#39;ll assume that this is the branch you want to add the MVA MET to.</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;git-cms-addpkg FWCore/Version</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;# Add the ic-cmssw fork of the cmssw repo and fetch its branches</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;git remote add -f ic-cmssw git@github.com:ajgilbert/cmssw.git</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;# Create a temporary branch from the 5_3_7 branch containing the MVA MET</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;git checkout --no-track -b rebase-attempt ic-cmssw/MVAMET-PileupJetID-from-CMSSW_5_3_7</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;# This is the command that will do all the work, attempting to rebase the commits</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;# that add the MVA MET onto your 5_3_X release</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;git rebase --onto from-CMSSW_5_3_X CMSSW_5_3_7 rebase-attempt</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;# If there are no merge issues this should complete fine. If you do hit</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;# issues the rebase will pause, and you will have to fix any merge issues</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;# by hand, then instruct git to continue the rebase. If in doubt, git status</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;# should tell you what you need to do.</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;# Once the rebase is finished, switch back to our target branch</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;git checkout from-CMSSW_5_3_X</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;# This should now be a trivial fast-forward merge</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;git merge rebase-attempt</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;# All done - we can delete the temporary branch</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;git branch -d rebase-attempt</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;# Now update the sparse-checkout file so the modified packages will be visible</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;git-cms-sparse-checkout CMSSW_X_Y_Z HEAD</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;# This updates the actual working directory with the new packages</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;git read-tree -u --reset HEAD</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;# Optional: if you want to use the lepton-pair input version of the MVA MET, checkout this</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;# standalone package. Different branches exist for `5_3_X` and `4_2_X` releases. See the</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;# README on the project page for more information:</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;# https://github.com/ajgilbert/ICAnalysis-MVAMETPairProducer</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;git clone git@github.com:ajgilbert/ICAnalysis-MVAMETPairProducer.git ICAnalysis/MVAMETPairProducer</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;~~~~~~~~~~~~~</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;\todo Document example python configs for the MVA MET and pileup jet ID</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;Tau Reconstruction and Discrimination {#obs-tau-reco}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;-----------------------------------------------------</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;Supported releases:</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  - `CMSSW_4_2_8_patch7`</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  - `CMSSW_5_3_X`</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  - `CMSSW_7_0_X`</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;Links:</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  - https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuidePFTauID</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;Over time many improvements to the tau reconstruction and identification have been developed by the tau POG. The twiki link above is a good reference to the different versions of the tau ID and how to add these to a release using git. The reconstruction and ID used in the legacy HiggsTauTau analysis corresponds to the section *Legacy Tau ID (Run I)*. This is now available by default in releases starting from `CMSSW_5_3_12`. For older releases the recipe provided on the twiki might cause issues with the merging. It may be safer to identify just the commits that change the `RecoTauTag` package and `git cherry-pick` them one-by-one, e.g.</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;~~~~~~~~~~~~~{.sh}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;# Get a summary of which commits changed the RecoTauTag package between</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;# the current HEAD and the recommended branch</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;git log --oneline HEAD..cms-tau-pog/CMSSW_5_3_X -- RecoTauTag</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;# Cherry-pick each commit - shouldn&#39;t result in any conflicts</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;git cherry-pick ....</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;git cherry-pick ....</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;git checkout HEAD</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;~~~~~~~~~~~~~</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;PF Isolation {#obs-pf-iso}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;--------------------------</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;- `CMSSW_4_2_8_patch7`</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;- `CMSSW_5_3_X`</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;- `CMSSW_7_0_X`</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;The calculation of PF iso-deposits for electrons changed during the `CMSSW_5_3_X` series. In the legacy HiggsTauTau analysis this was updated using a CVS tag on top of the `CMSSW_5_3_7` release. See this git commit for details of the changes:</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  - https://github.com/ajgilbert/cmssw/commit/b8bd99295f462f2c049d94d8660fe46fd4f7e5f8</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;This updated version was included after some later `CMSSW_5_3_X` release, so check first if you need to apply it. The change from `CandIsolatorFromDeposits` to `PFCandIsolatorFromDeposits` modules for the iso-deposit calculation should be a good indicator.</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;\todo Document example python configs for PF isolation</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;MVA Electron ID {#obs-mva-elec-id}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;----------------------------------</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;Supported releases:</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  - `CMSSW_4_2_8_patch7`</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  - `CMSSW_5_3_X`</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  - `CMSSW_7_0_X`</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;The code for the electron ID MVA is contained in the `EgammaAnalysis/ElectronTools` package. In older `CMSSW_5_3_X` series releases this package was not included. For the legacy HiggsTauTau analysis this code was added to the `CMSSW_5_3_7` release using a CVS recipe, but is now most easily obtained by a `git cherry-pick` of this commit:</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  - https://github.com/ajgilbert/cmssw/commit/50c18f9a40c3175f0d8d0e3d9b098b561bf067b0</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;\todo Document example python configs for MVA electron ID</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
</body>
</html>
